events {
	worker_connections 1024;
	use epoll;
	multi_accept on;
	accept_mutex off;
}

http {
	access_log off;
	error_log off;

	upstream backendpool {
		least_conn;
		server app-0:8080;
		server app-1:8081;
	}

	server {
		listen ${NGINX_PORT} default_server;

		location / {
			proxy_pass http://backendpool;
			proxy_http_version 1.1;
			proxy_buffering off;
			proxy_cache off;
			proxy_store off;
			proxy_connect_timeout 100ms;
			proxy_send_timeout 1s;
			proxy_read_timeout 1s;
		}
	}
}
